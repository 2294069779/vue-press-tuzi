---
title: gitlab-cicdğŸ”¥
date: 2023-1-1
categories:
  - Git
tags:
  - Git
  - å‰ç«¯è‡ªåŠ¨åŒ–
sticky: 1
---

# gitlab-ci

##### gitlab-ci

- gitlab å†…ç½®å·¥å…·

##### gitlab-ci.yml

- æ ¹ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œå®šä¹‰äº† job å¦‚ä½•æ‰§è¡Œ

##### gitlabRunner

- æ‰§è¡Œå·¥å…·

##### ppeline ç®¡é“

-
- stages:
  - build
  - test
  - deploy
- stage:é˜¶æ®µ
  - Jobï¼šä½œä¸šï¼ˆä»»åŠ¡ï¼‰

```text
Jobè¢«å®šä¹‰ä¸ºé¡¶çº§å…ƒç´ ï¼Œå¹¶ä¸”è‡³å°‘åŒ…æ‹¬ä¸€æ¡scriptè¯­å¥ï¼Œå¦‚æœä¸€ä¸ª Job æ²¡æœ‰æ˜¾å¼åœ°å…³è”æŸä¸ª Stageï¼Œåˆ™ä¼šè¢«é»˜è®¤å…³è”åˆ° test Stage
```

##### gitlab-ci å‚æ•°

stagesï¼šå®šä¹‰å…¨å±€é˜¶æ®µï¼ˆæŒ‰é¡ºåºæ‰§è¡Œï¼‰ï¼Œå¦‚æœå¤šä¸ª job å…³è”çš„ stage åç›¸åŒä¸‹å¹¶è¡Œæ‰§è¡Œ

stageï¼šå…³è”çš„ Job

```text
å¦‚æœæ–‡ä»¶ä¸­æ²¡æœ‰å®šä¹‰ stagesï¼Œé‚£ä¹ˆåˆ™é»˜è®¤åŒ…å« buildã€test å’Œ deploy ä¸‰ä¸ª stage
```

image and services

```text
æŒ‡å®šä»»åŠ¡è¿è¡Œæ—¶æ‰€éœ€çš„è‡ªå®šä¹‰çš„dockeré•œåƒå’ŒæœåŠ¡
```

before_script and after_script

```text
before_script:ç”¨äºå®šä¹‰ä¸€äº›åœ¨æ‰€æœ‰ä»»åŠ¡æ‰§è¡Œå‰æ‰€éœ€æ‰§è¡Œçš„å‘½ä»¤ï¼ŒåŒ…æ‹¬éƒ¨ç½²å·¥ä½œï¼ˆå•ä¸ª/å…¨éƒ¨ï¼‰
after_script:ç”¨äºå®šä¹‰æ‰€æœ‰jobæ‰§è¡Œè¿‡åéœ€è¦æ‰§è¡Œçš„å‘½ä»¤
```

only and except

```text
only:å®šä¹‰äº†jobéœ€è¦æ‰§è¡Œçš„æ‰€åœ¨åˆ†æ”¯æˆ–æ ‡ç­¾
exceptï¼šå®šä¹‰äº†jobä¸ä¼šæ‰§è¡Œçš„æ‰€åœ¨åˆ†æ”¯æˆ–æ ‡ç­¾
onlyå’Œexceptå¦‚æœéƒ½å­˜åœ¨åœ¨ä¸€ä¸ªjobå£°æ˜ä¸­ï¼Œåˆ™æ‰€éœ€å¼•ç”¨å°†ä¼šè¢«onlyå’Œexceptæ‰€å®šä¹‰çš„åˆ†æ”¯è¿‡æ»¤
onlyå’Œexceptå…è®¸ä½¿ç”¨æ­£åˆ™
onlyå’Œexceptå…è®¸ä½¿ç”¨æŒ‡å®šä»“åº“åœ°å€ï¼Œä½†æ˜¯ä¸forksä»“åº“
```

![1677651726520](C:\Users\wangqin\AppData\Roaming\Typora\typora-user-images\1677651726520.png)

æ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬å…ˆæœ¬åœ°æ„å»ºå¥½ï¼Œç„¶åæäº¤`.gitlab-ci.yaml`

number= id

describe\*\*=

=parentId

**creatorNumber**=**creatorId**

**organizationNumber**=

**organizationName**=

=**permission.\*\***open\*\*

=permission.\*\*\*\*historyLabel

=**permission.\*\***memberManager\*\*
